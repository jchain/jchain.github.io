<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Install nVidia Driver on Fedora 17: A Non-typical Case &mdash; A Code Monkey's Blog</title>
  <meta name="author" content="jchain">






  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="/theme/images/favicon.png" rel="icon">

  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">

  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="/">A Code Monkey's Blog</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>


<ul class="main-navigation">
      <li >
        <a href="/category/c.html">C++</a>
      </li>
      <li >
        <a href="/category/cc.html">C/c++</a>
      </li>
      <li >
        <a href="/category/cygwin.html">Cygwin</a>
      </li>
      <li >
        <a href="/category/dev.html">Dev</a>
      </li>
      <li >
        <a href="/category/gcc.html">Gcc</a>
      </li>
      <li >
        <a href="/category/gdb.html">Gdb</a>
      </li>
      <li >
        <a href="/category/git.html">Git</a>
      </li>
      <li >
        <a href="/category/gnome.html">Gnome</a>
      </li>
      <li >
        <a href="/category/gnuplot.html">Gnuplot</a>
      </li>
      <li >
        <a href="/category/java.html">Java</a>
      </li>
      <li >
        <a href="/category/latex.html">Latex</a>
      </li>
      <li class="active">
        <a href="/category/linux.html">Linux</a>
      </li>
      <li >
        <a href="/category/lisp.html">Lisp</a>
      </li>
      <li >
        <a href="/category/math.html">Math</a>
      </li>
      <li >
        <a href="/category/misc.html">Misc</a>
      </li>
      <li >
        <a href="/category/octave.html">Octave</a>
      </li>
      <li >
        <a href="/category/oop.html">Oop</a>
      </li>
      <li >
        <a href="/category/openmp.html">Openmp</a>
      </li>
      <li >
        <a href="/category/perl.html">Perl</a>
      </li>
      <li >
        <a href="/category/r.html">R</a>
      </li>
      <li >
        <a href="/category/subversion.html">Subversion</a>
      </li>
      <li >
        <a href="/category/uncategorized.html">Uncategorized</a>
      </li>
      <li >
        <a href="/category/vim.html">Vim</a>
      </li>
      <li >
        <a href="/category/web.html">Web</a>
      </li>
      <li >
        <a href="/category/yeah.html">Yeah</a>
      </li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Install nVidia Driver on Fedora 17: A Non-typical Case</h1>
    <p class="meta">
<time datetime="2012-11-28T02:10:00-05:00" pubdate>Nov 28 2012</time>    </p>
</header>

  <div class="entry-content"><p>Finally I succeeded in installing the nVidia driver on my old Dell Inspiron 530 geared an old nVidia
8300 GS video card running Fedora 17 i386. Here is a quick recap on my journey with Fedora 17. </p>
<p>I started constantly using Fedora 17 half a year ago. I had used the default open source nVidia
driver <code>nouveau</code> happily until the system updated the kernel from the 3.3.4 to some newer version.
None of these newer kernels worked well with the <code>nouveau</code> driver. A common issue was the mouse was
drawn as a big block and the GUI color was totally garbage. I tried to install the nVidia driver
either according to <a href="http://www.if-not-true-then-false.com/2012/fedora-17-nvidia-guide/">what it said</a> or using the installer from the official website of nVidia.
But neither way worked. I could see the mouse was spinning but the whole system kept froze. So I
excluded the kernel update in <code>yum.conf</code> under <code>/etc</code>. Everything was fine until one day my Fedora
Linux suddenly crashed with a kernel panic error. The traceback message indicated it was about a
kernel bug in the ext4 file system</p>
<div class="highlight"><pre><span></span>kernel BUG at fs/ext4/extents.c
</pre></div>


<p>Initially I thought it could be due to certain bad blocks on my hard drive. But soon the hacker news
confirmed that the bug in the kernel was the culprit. After several sudden losses of my working
sessions I couldn't wait for any more seconds to update the kernel. And I had to make the Xorg
server work too.</p>
<p>It really bugged me that the nVidia driver didn't work on my Fedora 17. I booted from Ubuntu Linux
installed on an external USB disk. And the nVidia driver worked fine under it. There must be
something wrong with <code>akmod-nvidia</code> or the official driver.</p>
<p>Accidentally I found the solution. It appeared that my 8300GS card was not supported very well in
the recent 3xx driver. I guess this type was not very common. I tried <code>akmod-nvidia-173xx</code> and X
server started this time. In my case, I didn't need to do this:</p>
<div class="highlight"><pre><span></span>Remove / disable nouveau drivers from kernel initramfs
</pre></div>


<p>The remaining issue was the OpenGL apps were indirectly rendered. It was due to the nVidia GL
library was not automatically loaded. The system still used the mesa GL to do the software
rendering. A workaround is to put the following line in <code>.bashrc</code></p>
<div class="highlight"><pre><span></span><span class="x">export LD_LIBRARY_PATH=/usr/lib/nvidia:</span><span class="p">$</span><span class="nv">LD_LIBRARY_PATH</span><span class="x"></span>
</pre></div>


<p>Another problem was the dual displays. The default <code>xorg.conf</code> generated by <code>akmod-nvidia-173xx</code>
didn't support the twin views. Additionally, <code>nvidia-settings</code> complained the X11 driver was too old
to be configured. Fortunately I had a copy of working <code>xorg.conf</code> at my Ubuntu partition. And here
is what it looks right now.</p>
<div class="highlight"><pre><span></span># RPM Fusion - nvidia-173xx-xorg.conf
# 
Section &quot;Monitor&quot;
    # HorizSync source: edid, VertRefresh source: edid
    Identifier     &quot;Monitor0&quot;
    VendorName     &quot;Unknown&quot;
    ModelName      &quot;DELL E228WFP&quot;
    HorizSync       30.0 - 83.0
    VertRefresh     56.0 - 75.0
    Option         &quot;DPMS&quot;
EndSection

Section &quot;Device&quot;
    Identifier  &quot;Device0&quot;
    Driver      &quot;nvidia&quot;
    Option      &quot;AddARGBGLXVisuals&quot; &quot;true&quot;
EndSection

Section &quot;Screen&quot;
    Identifier     &quot;Screen0&quot;
    Device         &quot;Device0&quot;
    Monitor        &quot;Monitor0&quot;
    DefaultDepth    24
    Option         &quot;TwinView&quot; &quot;1&quot;
    Option         &quot;TwinViewXineramaInfoOrder&quot; &quot;DFP-0&quot;
    Option         &quot;metamodes&quot; &quot;DFP: nvidia-auto-select +0+0, CRT: nvidia-auto-select +1680+0&quot;
    SubSection     &quot;Display&quot;
        Depth       24
    EndSubSection
EndSection
</pre></div>


<p>I'm so excited to have my Fedora back in good shape and I want share my story with you. Hopefully it
will help you if you are facing the same problem.</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">
        jchain
    </span>
  </span>
<time datetime="2012-11-28T02:10:00-05:00" pubdate>Nov 28 2012</time>  <span class="categories">
    <a class='category' href='/category/linux.html'>Linux</a>
  </span>
</p><div class="sharing">
</div>    </footer>
  </article>

</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="/fix-the-loading-dll-issue-of-octave-cygwin.html">Fix the loading dll issue of Octave Cygwin</a>
      </li>
      <li class="post">
          <a href="/use-juniper-vpn-client-under-fedora-20-x86-64.html">Use Juniper VPN Client under Fedora 20 x86-64</a>
      </li>
      <li class="post">
          <a href="/watch-netflix-in-linux.html">Watch Netflix in Linux</a>
      </li>
      <li class="post">
          <a href="/fly-with-vim-airline.html">Fly with vim airline</a>
      </li>
      <li class="post">
          <a href="/fedora-19-and-gnome-38.html">Fedora 19 and Gnome 3.8</a>
      </li>
    </ul>
  </section>

  <!--  -->
  <!-- <section> -->
  <!--      -->
  <!--   <h1>Categories</h1> -->
  <!--   <ul id="recent_posts"> -->
  <!--      -->
  <!--       <li><a href="/category/c.html">C++</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/cc.html">C/C++</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/cygwin.html">Cygwin</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/dev.html">Dev</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/gcc.html">GCC</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/gdb.html">GDB</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/git.html">Git</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/gnome.html">GNOME</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/gnuplot.html">Gnuplot</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/java.html">Java</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/latex.html">Latex</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/linux.html">Linux</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/lisp.html">Lisp</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/math.html">Math</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/misc.html">misc</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/octave.html">Octave</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/oop.html">OOP</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/openmp.html">OpenMP</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/perl.html">Perl</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/r.html">R</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/subversion.html">Subversion</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/uncategorized.html">Uncategorized</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/vim.html">Vim</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/web.html">Web</a></li> -->
  <!--      -->
  <!--       <li><a href="/category/yeah.html">yeah</a></li> -->
  <!--      -->
  <!--   </ul> -->
  <!-- </section> -->
  <!--   -->

  <section>
  <h1>Tags</h1>
    <a href="/tag/debugging.html">Debugging</a>,    <a href="/tag/gcj.html">GCJ</a>,    <a href="/tag/cc.html">C/C++</a>,    <a href="/tag/awesome.html">awesome</a>,    <a href="/tag/testing.html">Testing</a>,    <a href="/tag/project-management.html">Project management</a>,    <a href="/tag/vim.html">Vim</a>,    <a href="/tag/image-processing.html">Image processing</a>,    <a href="/tag/gdb.html">GDB</a>,    <a href="/tag/mingw.html">MinGW</a>,    <a href="/tag/linux.html">Linux</a>,    <a href="/tag/text-processing.html">text processing</a>,    <a href="/tag/tools.html">Tools</a>,    <a href="/tag/xml.html">XML</a>,    <a href="/tag/web.html">Web</a>,    <a href="/tag/gcc.html">GCC</a>,    <a href="/tag/git.html">Git</a>,    <a href="/tag/productivity.html">Productivity</a>,    <a href="/tag/wxwidgets.html">wxWidgets</a>,    <a href="/tag/gnuplot.html">Gnuplot</a>,    <a href="/tag/vtk.html">VTK</a>,    <a href="/tag/gtk.html">GTK</a>,    <a href="/tag/perl.html">Perl</a>,    <a href="/tag/subversion.html">Subversion</a>,    <a href="/tag/common-lisp.html">Common Lisp</a>,    <a href="/tag/emacs.html">Emacs</a>,    <a href="/tag/tips.html">tips</a>,    <a href="/tag/math.html">Math</a>,    <a href="/tag/word-processing.html">word processing</a>,    <a href="/tag/event-driven-programming.html">Event-driven programming</a>,    <a href="/tag/oop.html">OOP</a>,    <a href="/tag/python.html">Python</a>,    <a href="/tag/openmp.html">OpenMP</a>,    <a href="/tag/screen.html">Screen</a>,    <a href="/tag/opensuse.html">openSUSE</a>,    <a href="/tag/openoffice.html">openoffice</a>,    <a href="/tag/cygwin.html">Cygwin</a>,    <a href="/tag/octave.html">Octave</a>,    <a href="/tag/ubuntu.html">Ubuntu</a>,    <a href="/tag/totalview.html">Totalview</a>,    <a href="/tag/java.html">Java</a>,    <a href="/tag/vpn.html">VPN</a>,    <a href="/tag/visual-c.html">Visual C++</a>,    <a href="/tag/bash.html">Bash</a>,    <a href="/tag/wx.html">wx</a>,    <a href="/tag/svn.html">svn</a>,    <a href="/tag/latex.html">Latex</a>,    <a href="/tag/c.html">C++</a>,    <a href="/tag/gnome.html">Gnome</a>,    <a href="/tag/windows.html">Windows</a>,    <a href="/tag/gui.html">GUI</a>,    <a href="/tag/programming.html">Programming</a>,    <a href="/tag/valgrind.html">Valgrind</a>,    <a href="/tag/thats.html">thats</a>,    <a href="/tag/debug.html">Debug</a>,    <a href="/tag/cmake.html">CMake</a>,    <a href="/tag/delphi.html">Delphi</a>,    <a href="/tag/wine.html">Wine</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="https://github.com/jchain" target="_blank">github</a></li>
            <li><a href="http://stackoverflow.com/users/160506/john-chain" target="_blank">stack-overflow</a></li>
        </ul>
    </section>
    <section>
        <h1>Blogroll</h1>
        <ul>
            <li><a href="http://getpelican.com/" target="_blank">Pelican</a></li>
            <li><a href="http://python.org/" target="_blank">Python.org</a></li>
            <li><a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a></li>
        </ul>
    </section>

</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2006&ndash;2014  jchain &mdash;
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
  <script type="text/javascript">
    var disqus_shortname = 'zandy3';
    var disqus_identifier = '/install-nvidia-driver-on-fedora-17-a-non-typical-case.html';
    var disqus_url = '/install-nvidia-driver-on-fedora-17-a-non-typical-case.html';
    var disqus_title = 'Install nVidia Driver on Fedora 17: A Non-typical Case';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
</body>
</html>